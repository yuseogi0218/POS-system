# POS 정산 시스템
### 음식점을 대상으로 한 POS(Point Of Sale) 시스템 및 정산 시스템
- 상점 주인과 고객을 위한 상품 주문 및 거래 결제 기능 제공 
- 상점 주인을 위한 상품 판매 통계 및 거래 정산을 위한 배치 프로그램 및 확장성을 고려한 설계 적용 

---
## 프로젝트 기술적 경험
> **프로젝트 테스트 실행 환경**
> - 서버 자원 - AWS EC2 → t2.micro 인스턴스 (Free-Tier), vCPU (가상 CPU) 1 core, RAM(메모리) 1GiB
> - 데이터베이스 자원 - AWS RDS → db.t4g.micro 인스턴스 (Free-Tier), vCPU (가상 CPU) 2 core, RAM(메모리) 1GiB
> 
> *보통 vCPU 는 물리 CPU 사양의 절반 정도의 성능을 가진다.*
### 1. 최대 약 280만건의 거래 데이터에 대해서 1000건 결과 데이터 집계 시, 30초 이내로 배치 프로그램 수행 완료
- 최대 약 100만건의 거래 데이터에 대해서 100건 결과 데이터 집계 시, 5초 이내로 배치 프로그램 수행 완료
- Spring Batch 를 활용한 배치 프로그램 작성
  - Chunk 기반으로 JdbcPagingItemReader 와 JdbcBatchItemWriter 를 활용한 배치 프로그램 구성  
- GROUP BY + SUM 쿼리를 활용한 집계 수행

![Architecture 사진]()

### 2. 서비스 규모 증가 및 확장성을 고려한 배치 프로그램 설계 적용
![New Architecture 사진]()
- Database에서 GROUP BY + SUM 쿼리를 통해서 수행하던 집계 역할을, Redis 가 대신 수행하는 설계
  - 쿼리 작성 및 유지보수에 대한 리소스 절약과 쿼리 실행 계획의 단순화를 통해 대규모 데이터 처리 시, 성능 향상을 기대할 수 있음
- 최대 약 280만건의 거래 데이터에 대해서 1000건 결과 데이터 집계 시, 4분 20초 이내로 배치 프로그램 수행 완료
- 최대 약 100만건의 거래 데이터에 대해서 100건 결과 데이터 집계 시, 45초 이내로 배치 프로그램 수행 완료
  - 기존 18분에 수행되던 작업이었지만, 내장 함수 제거와 인덱스 추가를 통해 45초로 단축 **(95.94% 단축)**

### 3. Prometheus With Pushgateway & Grafana 를 통한 배치 프로그램 모니터링 구성
- Batch 와 같은 단발성 작업으로 설계된 Task의 지표를 Prometheus 에 역으로 Push 하기 위해서 Pushgateway를 사용함
- 배치 프로그램의 성능 분석을 위한 자체적으로 Grafana Dashboard 구성
- Application Grafana Dashboard 와 결합

**배치 프로그램 모니터링**
- 전체 Job 실행 횟수, Job 성공 횟수, Job 실패 횟수, Job 실행 시간 등의 지표를 확인할 수 있음

![배치 프로그램 모니터링 gif]()

**Application 모니터링**
- CPU, JVM Heap 상태, 각 API 별 초당 요청 횟수 및 각 API 별 응답 시간을 확인할 수 있음

![Application 모니터링 gif]()

### 4. 프로젝트 문서화 진행
- 프로젝트 진행 시, 내용 정리 및 진행사항 트래킹을 위해 문서화 작업 수행
- 항해99 취업 리부트 코스 6기 - 우수 프로젝트 기록 선정

---

## 서비스 아키텍처 ⚙️
![서비스 아키텍처 사진]()

---

## ERD
![ERD 사진]()